---
title: "Creating Pie Charts"
format:
  html:
    code-fold: show
jupyter: python3
---

In this lesson, we’ll learn how to create pie charts in Python using Plotly Express. Pie charts show how a whole is divided into parts — for example, how a player’s field goals are distributed across different seasons.

## When to Use Pie Charts

Pie charts are useful when you want to show percentages or proportions that make up a total. They work best when you have only a few categories to compare, such as a handful of seasons or types of shots.

### Step 1 — Import Libraries and Load Data

We’ll use Pandas to load Pascal Siakam’s data from a CSV file. Then we’ll reduce it to just the columns we need: season and field goals made.

```{python}
# Setup
import pandas as pd
import plotly.express as px

# Input: Load Pascal Siakam's data into a DataFrame
url = "https://raw.githubusercontent.com/pbeens/Data-Dunkers/main/Data/Pascal_Siakam.csv"
df = pd.read_csv(url)

# Keep only seasons up to 2022–23
df = df[df["SEASON_ID"] <= "2022-23"]

# Reduce to essential columns
df = df[["SEASON_ID", "FGM"]]

# Preview the first few rows
df.head()
```

### Step 2 — Create a Simple Pie Chart

When creating a pie chart, we use `values=` and `names=` instead of `x=` and `y=`.

```{python}
# Pie chart of field goals made by season
px.pie(df, 
    values="FGM", 
    names="SEASON_ID", 
    title="Siakam Field Goals by Season")
```

### Step 3 — Customizing Pie Charts

By default, pie charts only display percentages on each slice. You can use the textinfo option to also show the category names, or to customize what text appears.

```{python}
# Customized pie chart
px.pie(df, values="FGM", names="SEASON_ID",
    title="Siakam Field Goals by Season").update_traces(textinfo="percent+label")
```

Donut charts are a nice alternative that highlight proportions while giving room for extra annotation in the middle.

```{python}
px.pie(df, values="FGM", names="SEASON_ID",
    title="Siakam Field Goals by Season",
    hole=0.2)
```

Sometimes it’s clearer to sort slices by value rather than the dataset order.

```{python}
px.pie(
    df.sort_values("FGM", ascending=False),
    values="FGM", names="SEASON_ID",
    title="Siakam Field Goals by Season (Sorted)")
```

## Talk About It

* When is a pie chart more effective than a bar graph for showing proportions?
* What are some drawbacks of pie charts compared to other chart types?
* If you had 20 seasons of data, would a pie chart still be a good choice? Why or why not?

## Lesson Notebook

Now it’s your turn to practice: The notebook version of this lesson includes an additional exercise where you’ll create your own pie chart from the dataset.

Open the lesson [here](https://github.com/Data-Dunkers/lessons/blob/main/graphing-pie-charts.ipynb).
