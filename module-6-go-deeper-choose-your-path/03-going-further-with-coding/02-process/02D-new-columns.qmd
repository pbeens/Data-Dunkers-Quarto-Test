---
title: "Creating New Columns"
format:
  html:
    code-fold: show
jupyter: python3
---

In this lesson, we’ll learn how to create new columns in a Pandas DataFrame. New columns can be made by combining or transforming existing columns to generate more meaningful statistics.

## When to Create New Columns

Sometimes the dataset doesn’t include the exact information you need. By performing calculations on existing columns, you can create new ones — such as averages, totals, or percentages — to reveal additional insights.

### Step 1 — Import Libraries and Load Data

We’ll use Pandas to load Raptors team data from a CSV file into a DataFrame.

```{python}
# Setup
import pandas as pd

# Input: Load Raptors data into a DataFrame
url = "https://github.com/Data-Dunkers/data/raw/refs/heads/main/NBA/raptors-2023.csv"
df = pd.read_csv(url)

# Reduce the DataFrame to essential columns
columns = ["Player", "G", "MP", "FG%", "FT%"]
df_small = df[columns]

# Preview
df_small.head()
```

### Step 2 — Create a New Column

We can create a new column called `Shot Average (%)` by averaging the Field Goal Percentage (`FG%`) and Free Throw Percentage (`FT%`).

```{python}
# Create a new column by averaging FG% and FT%
df_small["Shot Average (%)"] = (df["FG%"] + df["FT%"]) / 2

# Display selected columns
df_small[["Player", "FG%", "FT%", "Shot Average (%)"]]
```

### Step 3 — Round the New Column

To make the new column easier to read, we can round it to one decimal place.

```{python}
# Round the Shot Average column to one decimal place
df_small["Shot Average (%)"] = df_small["Shot Average (%)"].round(1)

# Display selected columns
df_small[["Player", "FG%", "FT%", "Shot Average (%)"]]
```

## Talk About It

* Why might you want to create new columns instead of only using the data that’s already provided?
* What are some risks of creating new columns (for example, introducing errors if you calculate incorrectly)?
* How can rounding or formatting improve the readability of new data?

## Lesson Notebook

Now it’s your turn to practice: The notebook version of this lesson includes more examples of adding and formatting new columns.

Open the lesson [here](https://github.com/Data-Dunkers/lessons/blob/main/data-new-columns.ipynb).
